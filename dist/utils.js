"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isActivity=exports.isTheme=exports.isBundle=exports.isPlugin=exports.filterObject=exports.firstUpperCase=exports.isEmptyObject=exports.isArray=exports.fsExistsSync=exports.searchIgnoreDirs=exports.searchDirs=exports.searchEntries=void 0;var _glob=_interopRequireDefault(require("glob"));var _fs=_interopRequireDefault(require("fs"));var _path=_interopRequireDefault(require("path"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}var sep=_path["default"].sep;var searchEntries=function searchEntries(options){var files={};// 如果目录以'/'结尾，则去掉
options.entryPath=options.entryPath.replace(/\/$/,'');/**
   * fileNamePrefix 表示输出文件的前缀
   * 如输出'app/js/default/index.js',则前缀为'app/js/default/'
   */var pattern='';if(options.fileType=='less'){pattern="".concat(options.entryPath,"/").concat(options.fileName,"*.less");}else if(options.isFuzzy){pattern="".concat(options.entryPath,"/**/").concat(options.fileName,".{js,jsx}");}else{pattern="".concat(options.entryPath,"/").concat(options.fileName,".{js,jsx}");}_glob["default"].sync(pattern).forEach(function(file){var entryName=options.fileNamePrefix+file.replace(options.entryPath+'/','').replace(file.substring(file.lastIndexOf('.')),'');files[entryName]=file;});return files;};// 判断文件或文件夹是否存在
exports.searchEntries=searchEntries;var fsExistsSync=function fsExistsSync(path){try{_fs["default"].accessSync(path,_fs["default"].F_OK);}catch(e){return false;}return true;};exports.fsExistsSync=fsExistsSync;var searchDirs=function searchDirs(searchDir,isExistDir){var dirsArr=[];if(!fsExistsSync(searchDir)){return[];}var dirs=_fs["default"].readdirSync(searchDir);dirs=dirs.filter(function(dir){return dir!=='.DS_Store'&&dir!=='.gitkeep'&&fsExistsSync("".concat(searchDir,"/").concat(dir,"/").concat(isExistDir));});dirsArr=dirs.map(function(dir){return"".concat(searchDir,"/").concat(dir);});return dirsArr;};// 需要忽略的目录
exports.searchDirs=searchDirs;var searchIgnoreDirs=function searchIgnoreDirs(searchDir,watchDirs){var dirsArr=[];if(!fsExistsSync(searchDir)){return[];};var dirs=_fs["default"].readdirSync(searchDir);dirs=dirs.filter(function(dir){return dir!=='.DS_Store'&&dir!=='.gitkeep'&&watchDirs.indexOf(dir)===-1;});dirsArr=dirs.map(function(dir){return"".concat(searchDir,"/").concat(dir);});return dirsArr;};exports.searchIgnoreDirs=searchIgnoreDirs;var isArray=function isArray(arr){return Object.prototype.toString.call(arr)==='[object Array]';};exports.isArray=isArray;var isEmptyObject=function isEmptyObject(obj){for(var item in obj){return false;}return true;};exports.isEmptyObject=isEmptyObject;var firstUpperCase=function firstUpperCase(str){return str.toLowerCase().replace(/( |^)[a-z]/g,function(L){return L.toUpperCase();});};exports.firstUpperCase=firstUpperCase;var filterObject=function filterObject(obj,filterName){var newObj={};var filterObj={};var filterArr=filterName.split(',');for(var item in obj){if(filterArr.indexOf(item)===-1){newObj[item]=obj[item];}else{filterObj[item]=obj[item];}}return{newObj:newObj,filterObj:filterObj};};exports.filterObject=filterObject;var isPlugin=function isPlugin(path){return path.indexOf('Plugin')!==-1;};exports.isPlugin=isPlugin;var isBundle=function isBundle(path){return path.indexOf('Bundle')!==-1;};exports.isBundle=isBundle;var isTheme=function isTheme(path){var finalPath=path.split(sep).join('/');return finalPath.indexOf('web/themes')!==-1;};exports.isTheme=isTheme;var isActivity=function isActivity(path){return path.indexOf('activities')!==-1;};exports.isActivity=isActivity;